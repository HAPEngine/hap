set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

CMAKE_MINIMUM_REQUIRED(VERSION 3.8)
PROJECT(hap)

SET(SOURCES src/module.c src/timer.c)

# Hap as a shared library
ADD_LIBRARY(libhap SHARED ${SOURCES})
TARGET_INCLUDE_DIRECTORIES(libhap PUBLIC
  ${CMAKE_CURRENT_SOURCE_DIR}/include
)

# Standard hap executable
ADD_EXECUTABLE(hap src/cmds/hap.c)
TARGET_LINK_LIBRARIES(hap dl libhap)
